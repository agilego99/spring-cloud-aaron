<!doctype html>
<html lang="en">

<head>
  <meta charset="utf-8">
  <meta http-equiv="content-type" content="text/html; charset=utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
  
  <link rel="stylesheet" href="dependencies/bpmn-js/assets/bpmn-font/css/bpmn.css" /> <!-- for lasso tool, space tool etc. -->
  <link rel="stylesheet" href="dependencies/diagram-js.css" /> <!-- for palette -->
  <link rel="stylesheet" href="domain-story.css" />
  <link rel="stylesheet" href="domain-story-modeler/language/icon/icons.css" id="iconsCss"/>

  <title>Domain Story Modeler</title>
</head>

<body>

  <input type="file" accept=".svg, image/png, image/jpeg, image/gif, image/bmp" style="display:none;" id="importIcon" onclick="this.value=null;" name="file" />

  <div id="modal" style="display:none;"></div>
  <div class ="headerAndCanvas">
    <div id = "pickerAnchor"></div>
    <div class="header">
      <div id="headlineAndButtons">
        <h3 id="headline">
              <text id="title">&ltname of this Domain Story&gt</text>
              <img src="./logo/edit_blue.png" id="edit">
        </h3>
        <div class="ButtonContainer">
            <div id=editModeButtons>
                </button><button id="buttonStartReplay" class="startReplayButton" title="Start replay">
                    <img src="./logo/play.png">
                </button>
                <button id="buttonImport" class="importButton" title="Import story from .dst file" onclick="document.getElementById('import').click();">
                    <img src="./logo/unarchive.png">
                  </button>
                  <input type="file" accept=".dst" style="display:none;" id="import" onclick="this.value=null;" name="file" />
                  <button class="exportButton" id="export" title="Export story as .dst file">
                    <img id="exportButtonIMG" src="./logo/archive.png">
                    <img id="exportButtonIMGDirty" src = "./logo/archive_dirty.png" style="display: none">
                  </button>
                  <button class="downloadButton" id="buttonImageDownloads" title="Export story as SVG or PNG image">
                    <img src="./logo/image.png">
                  </button>
                  <button id="dictionaryButton" title="Edit dictionary">
                    <img src="./logo/spellcheck.png">
                  </button>
                  <button id="iconCustomizationButton">
                    <img src="./logo//settings.png" title="Customize icons">
                  <button id="keyboardShortcutInfoButton" title="Show keyboard shortcuts">
                      <img src="./logo/shortCutInfo.png">
                    </button>
            </div>
            <div id="presentationModeButtons" style="display: none">
              <button id="buttonPreviousStep" class="prevoiusStepButton" title="Previous Step">
                <img src="./logo/previous.png">
              </button>
              <button id="buttonNextStep" class="NextStepButton" title="NextStep">
                <img src="./logo/forward.png">
              </button>
              <button id="buttonStopReplay" class="stopReplayButton" title="Stop replay">
                <img src="./logo/stop.png">
              </button>
              <div id="replayStep"> 0/0</div>
          </div>
          <div></div>
        </div>
      </div>
      <div id="infoContainer">
          <div id="infoText"></div>
        <div id="currentDomainNameContainer">
            <text>Domain: </text>
            <text id="currentDomainName">default</text>
        </div>
    </div>
  </div>
  <div id="line"></div>
  <div id="canvas"></div>
</div>
  <div class="logoContainer">
    <div id="imgWPS">
      <img src="./logo/Quadrat_wps_de_Farbig.png" height="54" width="40" />
    </div>
    <div id="imgDST">
      <!-- a href="http://domainstorytelling.org/" -->
      <img src="./logo/dst_logo.png" height="74" width="74" />
      <!-- /a -->
    </div>
  </div>

  <div id="wpsLogoInfo" style="display:none;">
    <button id="closeWPSLogoInfo">X</button>
    <br>
    <text id="wpsLogoInnerText"></text>
    <a href="https://www.wps.de">wps.de</a>
    <text id="wpsLogoInnerText2"></text>
    <br>
    <a href="https://github.com/WPS/domain-story-modeler">https://github.com/WPS/domain-story-modeler</a>
  </div>

  <div id="dstLogoInfo" style="display:none;">
    <button id="closeDSTLogoInfo">X</button>
    <br>
    <text id= "dstLogoInnerText"></text>
    <br>
    <a href="http://www.domainstorytelling.org">domainstorytelling.org</a>
  </div>

  <div id="arrowDialog">
      <div id="arrow" class="arrow" style="display:none;"></div>
      <div id="dialog" style="display:none;">
      <div id="dialogTitle">Title:</div>
      <div id="dialogInput">
        <input type="text" id="titleInput" maxlength="160" />
      </div>
      <div id="dialogInfo">Description:</div>
      <div id="descriptionInput">
        <textarea name="Text1" cols="40" rows="5" id="info" maxlength="500"></textarea>
      </div>
      <div id="dialogButtons">
        <button id="saveButton">Save</button>
        <button id="quitButton">Cancel</button>
      </div>
    </div>
  </div>

  <div id="iconCustomizationContainer"  style ="display:none">
    <div class="iconConfigCustomization">
      <div class="topButtonRow">
        <div>
          <button id="resetIconConfigButton">reset to default</button>
          <button id="uploadCutomIcon" onclick="document.getElementById('importIcon').click();"> upload custom icon</button>
        </div>
        <div>
          <span>Domain name:</span>
          <input type="text" id="domainNameInput" value="default">
        </div>
        <div>
          <img src="./logo/unarchive.png" id="importConfigurationButton" title="import icon configuration" onclick="document.getElementById('importConfig').click()">
          <img id="exportConfigurationButton" src="./logo/archive.png" title="export icon configuration">
          <input type="file" accept=".domain" style="display:none;" id="importConfig" onclick="this.value=null;" name="file" />
        </div>
        <div>
          <button id="customIconConfigSaveButton">Save</button>
          <button id="cancelIconCustomizationButton">Cancel</button>
        </div>
      </div>
      <div class="iconListsContainer">
        <div id="allIconListContainer">
          <div id="allIconsListHeader">
            <text> Unassigned |</text>
            <text> Actor |</text>
            <text> WorkObject</text>
          </div>
          <div class="listWrapper">
            <ul id="allIconsList"></ul>
          </div>
        </div>
        <div class="selectedIconsContainer">
          <div id="selectedActorsContainer">
            <p class="selectedIconListHeader">Actors</p>
            <div class="listWrapper">
              <ul id="selectedActorsList"></ul>
            </div>
          </div>
          <div id="selectedWorkObjectsContainer">
            <p class="selectedIconListHeader">WorkObjects</p>
            <div class="listWrapper">
              <ul id="selectedWorkObjectsList"></ul>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>

  <div id="downloadDialog" style="display: none;">
    <button id="downloadDialogCancelButton">X</button>
    <br>
    <div class="buttonContainer">
      <button id="buttonSVG">  
        SVG
      </button>
      <button id=buttonPNG>
        PNG
      </button>
    </div>
  </div>

  <div id="numberDialog" style="display:none;">
    <div id="number">Number:</div>
    <input type="number" class="numberID" id="inputNumber" min="1" max="99" maxlength="2" size="2">
    <label>
      <input type="checkbox" name ="Nummer mehrfach zulassen" id="multipleNumberAllowed">
      multiple
    </label>
    <div id="label">Activity:</div>
    <div>
      <input id="inputLabel" type="text" autocomplete="off"/>
    </div>
    <div id="numberDialogButtons">
      <button id="numberSaveButton">Save</button>
      <button id="numberQuitButton">Cancel</button>
    </div>
  </div>

  <div id="labelDialog" style="display:none;">
    <div id="labelName">Activity:</div>
    <div>
      <input id="labelInputLabel" type="text" autocomplete="off"/>
    </div>
    <div id="labelDialogButtons">
      <button id="labelSaveButton">Save</button>
      <button id="labelQuitButton">Cancel</button>
    </div>
  </div>

  <div id= "keyboardShortcutInfo" style="display:none">
    <button id ="keyboardShortcutInfoDialogButtonCancel" style="float:right; margin-left:5px">X</button>
    <br>
      <table id="keyboardTable">
        <thead>
        </thead>
        <tbody>
          <tr>
            <td>Undo</td>
            <td>ctrl + Z</td>
          </tr>
          <tr>
            <td>Redo</td>
            <td>ctrl + Y     or     ctrl + shift + Z</td>
          </tr>
          <tr>
            <td>Select All</td>
            <td>ctrl + A</td>
          </tr>
          <tr>
            <td>Export DST</td>
            <td>ctrl + S</td>
          </tr>
          <tr>
            <td>Import DST</td>
            <td>ctrl + L</td>
          </tr>
          <tr>
            <td>Search for text (default browser funtion)</td>
            <td>ctrl + F</td>
          </tr>
          <tr>
            <td>Direct editing</td>
            <td>E</td>
          </tr>
          <tr>
            <td>Hand tool</td>
            <td>H</td>
          </tr>
          <tr>
            <td>Lasso tool</td>
            <td>L</td>
          </tr>
          <tr>
            <td>Space tool</td>
            <td>S</td>
          </tr>
        </tbody>
      </table>
  </div>

  <div id="dictionaryDialog" style="display:none">
    <div>
    <div id="activityDictionary" style="float:left">
      <text>Activities:</text>
      <div id="activityDictionaryContainer"></div>
    </div>
    <div id="workobjectDictionary" style="float:left">
      <text>Work Objects:</text>
      <div id= "workobjectDictionaryContainer"></div>
    </div>
  </div>
  <div style="clear:both;"></div>
    <div id="dictionaryButtons">
      <button id="closeDictionaryButtonSave">Save</button>
      <button id="closeDictionaryButtonCancel">Cancel</button>
    </div>
  </div>

  <div id="incompleteStoryInfo" style="display:none">
  <button id="closeIncompleteStoryInfo">X</button>
  <br>
  </div>

  <div id="noContentOnCanvasInfo" style="display: none">
    <button id="closeNoContentOnCanvasInfo">X</button>
    <br>
    <text>There currently is no content on the canvas.</text>
    <text>Without content the canvas cannot be exported.</text>
  </div>

  <div id="versionInfo" style="display:none">
  <button id="closeVersionDialog">X</button>
  <br>
  <text>Your Domain Story was created with modeler version</text>
  <text id="importedVersion"></text>
  <text>. This modeler is version</text>
  <text id="modelerVersion"></text>
  <text>. Please check release notes for possible compatibility problems.</text>
  </div>

  <div id="brokenDSTInfo" style="display:none">
    <button id="brokenDSTDialogButtonCancel">X</button>
    <br>
    <text>Your .dst File is incomplete, there most likely was an error during export.</text>
    <text>Some of your activities and Domain Elements might be missing.</text>
  </div>

  <script src="./app.js"></script>
  <script src="dependencies/jquery.min.js"></script> 

  <script>    
    /* from http://jsfiddle.net/jAYEt/2188/ 
    */
    var inputQuantity = [];
    $(function () {
      $(".numberID").each(function (i) {
        inputQuantity[i] = this.defaultValue;
        $(this).data("idx", i); // save this field's index to access later
      });
      $(".numberID").on("keyup", function (e) {
        var $field = $(this),
          val = this.value,
          $thisIndex = parseInt($field.data("idx"), 10); // retrieve the index
        if (this.validity && this.validity.badInput || isNaN(val) || $field.is(":invalid")) {
          this.value = inputQuantity[$thisIndex];
          return;
        }
        if (val.length > Number($field.attr("maxlength"))) {
          val = val.slice(0, 2);
          $field.val(val);
        }
        inputQuantity[$thisIndex] = val;
      });
      $(".incrementNumber").each(function (i) {
        inputQuantity[i] = this.defaultValue;
        $(this).data("idx", i); // save this field's index to access later
      });
      $(".incrementNumber").on("keyup", function (e) {
        var $field = $(this),
          val = this.value,
          $thisIndex = parseInt($field.data("idx"), 10); // retrieve the index
        if (this.validity && this.validity.badInput || isNaN(val) || $field.is(":invalid")) {
          this.value = inputQuantity[$thisIndex];
          return;
        }
        if (val.length > Number($field.attr("maxlength"))) {
          val = val.slice(0, 2);
          $field.val(val);
        }
        inputQuantity[$thisIndex] = val;
      });
    });</script>

</body>

</html>